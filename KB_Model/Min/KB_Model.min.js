var CreateKB_Model=function(){function g(){function e(){for(var d=Object.keys(p),b=0,c={},a,f,b=0;b<d.length;b++)c=p[d[b]],a=q("local").getItem("KB_Model_"+d[b]),f=q("session").getItem("KB_Model_"+d[b]),a?c._getData=JSON.parse(a):f?c._getData=JSON.parse(f):(c._getData=e.deepCopy(c._tempData),c._save&&q(c._save).setItem("KB_Model_"+d[b],JSON.stringify(c._getData))),e.deepInject(c._getData,c._bindData,d[b]),c._model&&(g[d[b]]={},e.deepInject(c._getData,g[d[b]],"Model"))}var g={},p={},m={},l={},t=function(d,
b,c,a,e,l,m,g){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.viewModel=d;this.scope=b;this.value=c;this.oldValue=a;this.scopeString=e;this.key=l;this.args=m;this.action=g},r=["local","session"],q=function(d){if(-1<r.indexOf(d))return"local"===d?localStorage:sessionStorage};e.Model=function(){return g};e.ViewModel=function(d,b,c,a){if(void 0===b&&void 0===d)return p;if(void 0===b&&void 0!==d)return p[d]._bindData;p[d]={_tempData:b,
_getData:{},_bindData:{},_save:void 0===c?!1:c,_model:!(void 0!==a&&!a)};return e};e.deepCopy=function(d,b){var c=Object.keys(d),a="",f=0;b=void 0===b?{}:b;for(f=0;f<c.length;f++)a=d[c[f]],a.constructor.toString()===Object.toString()?(b[c[f]]={},e.deepCopy(a,b[c[f]])):a.constructor.toString()===Array.toString()?(b[c[f]]=[],e.deepCopy(a,b[c[f]])):b[c[f]]=a;return b};e.deepInject=function(d,b,c,a){a=void 0===a?"":a;c=void 0===c?"unknown":c;var f=Object.keys(d),g,h;b=void 0===b?{}:b;var r=function(a,
f,g){var h=f.constructor.toString()===Object.toString(),r=f.constructor.toString()===Array.toString();g=1>g.length&&f.constructor.toString()===Array.toString()?g+(a+"["):1>g.length?g+a:g.lastIndexOf("[")===g.length-1?g+(a+"]"+(f.constructor.toString()===Array.toString()?"[":"")):f.constructor.toString()===Array.toString()?g+("."+a+"["):g+("."+a);h||r?(Object.defineProperty(b,a,{value:h?{}:[],writable:!1,enumerable:!0,configurable:!0}),e.deepInject(d[a],b[a],c,g)):Object.defineProperty(b,a,{get:function(){return d[a]},
set:function(f){var e=d[a],k;k=g;var n=new t(c,b,f,e,k,a),h=0;if(void 0!==m[a])b:for(h=0;h<m[a].length;h++)if(m[a][h].call({},n),n._stopPropogation)break b;if(void 0!==m[k]&&!n._stopPropogation)b:for(h=0;h<m[k].length;h++)if(m[k][h].call({},n),n._stopPropogation)break b;k=n._preventDefault?!1:!0;k&&(d[a]=f);k=c;n=g;f=new t(k,b,f,e,n,a,void 0,void 0);e=0;if(void 0!==l[a])b:for(e=0;e<l[a].length;e++)if(l[a][e].call({},f),f._stopPropogation)break b;if(void 0!==l[n]&&!f._stopPropogation)b:for(e=0;e<l[n].length;e++)if(l[n][e].call({},
f),f._stopPropogation)break b;f=q("local").getItem("KB_Model_"+k);e=q("session").getItem("KB_Model_"+k);f?q("local").setItem("KB_Model_"+k,JSON.stringify(p[k]._getData)):e&&q("session").setItem("KB_Model_"+k,JSON.stringify(p[k]._getData))},enumerable:!0,configurable:!0})};for(h=0;h<f.length;h++)g=d[f[h]],r(f[h],g,a);return b};e.addDataListener=function(d,b){void 0===m[d]&&(m[d]=[]);m[d].push(b);return e};e.removeDataListener=function(d,b){var c=0,a=dataListeners[d];if(void 0!==a)a:for(c=0;c<a.length;c++)if(a[c].toString()===
b.toString()){a.splice(c,1);break a}return e};e.addDataUpdateListener=function(d,b){void 0===l[d]&&(l[d]=[]);l[d].push(b);return e};e.removeDataUpdateListener=function(d,b){var c=0,a=l[d];if(void 0!==a)a:for(c=0;c<a.length;c++)if(a[c].toString()===b.toString()){a.splice(c,1);break a}return e};return e}"function"===typeof define&&define.amd?(define("KB_Model",g),define([],g)):"object"===typeof module&&module.exports&&(module.exports=g);return g}();
